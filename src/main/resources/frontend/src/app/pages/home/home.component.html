<!-- Hero Section -->
<section class="hero min-vh-100 d-flex align-items-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <div class="hero-content fade-in">
          <h1 class="display-4 text-white mb-4">
            Descubre el Caribe a tu manera
          </h1>
          <p class="lead text-white mb-4">
            Personaliza tu experiencia de viaje y vive aventuras únicas adaptadas a tus preferencias.
          </p>
          <div class="d-flex gap-3 flex-wrap">
            <button class="btn btn-primary btn-lg" (click)="navigateToDestinations()">
              <i class="fas fa-map-marked-alt me-2"></i>
              Personalizar Viaje
            </button>
            <button class="btn btn-outline-light btn-lg" (click)="navigateToDestinations()">
              <i class="fas fa-compass me-2"></i>
              Explorar Destinos
            </button>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="hero-carousel fade-in">
          <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3000">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            </div>
            <div class="carousel-inner rounded-3 shadow-lg">
              <div class="carousel-item active">
                <img src="assets/images/image1.png" class="d-block w-100" alt="Paraíso Caribeño">
              </div>
              <div class="carousel-item">
                <img src="assets/images/image2.png" class="d-block w-100" alt="Atardecer Tropical">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="hero-wave"></div>
</section>

<!-- Beneficios Section -->
<section class="py-5 bg-neutral">
  <div class="container">
    <h2 class="text-center mb-5 text-secondary">Beneficios de Personalización</h2>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="benefit-card h-100 card border-0 shadow-sm">
          <div class="card-body text-center p-4">
            <div class="benefit-icon mb-3">
              <i class="fas fa-user-cog fa-3x text-primary"></i>
            </div>
            <h3 class="h4 mb-3 text-secondary">Experiencias a tu Medida</h3>
            <p class="text-muted">Diseña tu viaje según tus intereses, tiempo y presupuesto.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="benefit-card h-100 card border-0 shadow-sm">
          <div class="card-body text-center p-4">
            <div class="benefit-icon mb-3">
              <i class="fas fa-handshake fa-3x text-primary"></i>
            </div>
            <h3 class="h4 mb-3 text-secondary">Conexión Local</h3>
            <p class="text-muted">Vive experiencias auténticas con comunidades locales.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="benefit-card h-100 card border-0 shadow-sm">
          <div class="card-body text-center p-4">
            <div class="benefit-icon mb-3">
              <i class="fas fa-headset fa-3x text-primary"></i>
            </div>
            <h3 class="h4 mb-3 text-secondary">Soporte 24/7</h3>
            <p class="text-muted">Asistencia personalizada durante todo tu viaje.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Como Funciona -->
<section class="py-5">
  <div class="container">
    <h2 class="text-center mb-5 text-secondary">Así es como funciona</h2>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="steps d-flex flex-column gap-4">
          <div class="step-item d-flex align-items-start gap-3">
            <div class="step-number bg-accent text-white rounded-circle d-flex align-items-center justify-content-center" 
                 style="width: 50px; height: 50px; font-weight: bold;">1</div>
            <div class="step-content">
              <h3 class="h5 text-secondary">Cuéntanos tus preferencias</h3>
              <p class="text-muted">Completa un breve cuestionario sobre tus intereses y estilo de viaje.</p>
            </div>
          </div>
          <div class="step-item d-flex align-items-start gap-3">
            <div class="step-number bg-accent text-white rounded-circle d-flex align-items-center justify-content-center" 
                 style="width: 50px; height: 50px; font-weight: bold;">2</div>
            <div class="step-content">
              <h3 class="h5 text-secondary">Recibe propuestas personalizadas</h3>
              <p class="text-muted">Te presentamos opciones adaptadas a tus preferencias y presupuesto.</p>
            </div>
          </div>
          <div class="step-item d-flex align-items-start gap-3">
            <div class="step-number bg-accent text-white rounded-circle d-flex align-items-center justify-content-center" 
                 style="width: 50px; height: 50px; font-weight: bold;">3</div>
            <div class="step-content">
              <h3 class="h5 text-secondary">¡Disfruta tu viaje!</h3>
              <p class="text-muted">Vive experiencias únicas con el respaldo de nuestro equipo.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Destinos Populares -->
<section class="py-5 bg-neutral" *ngIf="popularDestinations.length > 0">
  <div class="container">
    <div class="row align-items-center mb-5">
      <div class="col">
        <h2 class="text-secondary mb-0">Destinos Populares</h2>
        <p class="text-muted">Descubre los lugares más visitados del Caribe</p>
      </div>
      <div class="col-auto">
        <button class="btn btn-outline-primary" (click)="navigateToDestinations()">
          Ver Todos <i class="fas fa-arrow-right ms-1"></i>
        </button>
      </div>
    </div>
    <div class="row g-4">
      <div class="col-md-4" *ngFor="let destination of popularDestinations">
        <div class="card h-100 border-0 shadow-sm destination-card" 
             (click)="navigateToDestination(destination.id)" 
             style="cursor: pointer;">
          <img [src]="destination.imageUrl" 
               class="card-img-top" 
               style="height: 250px; object-fit: cover;"
               [alt]="destination.name"
               onerror="this.src='https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=250&fit=crop'">
          <div class="card-body">
            <h5 class="card-title text-secondary">{{ destination.name }}</h5>
            <p class="text-muted small" *ngIf="destination.location">{{ destination.location }}</p>
            <p class="text-muted small" *ngIf="!destination.location && destination.category">{{ destination.category }}</p>
            <p class="card-text text-muted">{{ destination.description | slice:0:100 }}...</p>
            <div class="d-flex justify-content-between align-items-center">
              <span class="badge bg-primary">Popular</span>
              <i class="fas fa-arrow-right text-primary"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Hoteles Destacados -->
<section class="py-5" *ngIf="topRatedHotels.length > 0">
  <div class="container">
    <div class="row align-items-center mb-5">
      <div class="col">
        <h2 class="text-secondary mb-0">Hoteles Mejor Valorados</h2>
        <p class="text-muted">Alojamientos de calidad con las mejores reseñas</p>
      </div>
      <div class="col-auto">
        <button class="btn btn-outline-primary" (click)="navigateToHotels()">
          Ver Todos <i class="fas fa-arrow-right ms-1"></i>
        </button>
      </div>
    </div>
    <div class="row g-4">
      <div class="col-md-4" *ngFor="let hotel of topRatedHotels">
        <div class="card h-100 border-0 shadow-sm hotel-card" 
             (click)="navigateToHotel(hotel.id)" 
             style="cursor: pointer;">
          <img [src]="hotel.imageUrl" 
               class="card-img-top" 
               style="height: 250px; object-fit: cover;"
               [alt]="hotel.name"
               onerror="this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=250&fit=crop'">
          <div class="card-body">
            <h5 class="card-title text-secondary">{{ hotel.name }}</h5>
            <p class="text-muted small">
              <i class="fas fa-map-marker-alt me-1"></i>
              {{ hotel.destinationName || 'Destino no especificado' }}
            </p>
            
            <!-- Categoría del hotel (estrellas) -->
            <div class="d-flex align-items-center mb-2">
              <small class="text-muted me-2">Categoría:</small>
              <div class="stars">
                <i class="fas fa-star text-warning" *ngFor="let star of [].constructor(hotel.stars)"></i>
              </div>
            </div>
            
            <!-- Rating de usuarios con manejo mejorado -->
            <div class="d-flex align-items-center mb-2">
              <small class="text-muted me-2">Valoración:</small>
              <div class="d-flex align-items-center">
                <!-- Mostrar solo si hay rating válido -->
                <ng-container *ngIf="hotel.rating && hotel.rating > 0; else noReviews">
                  <div class="rating-stars me-2">
                    <i class="fas fa-star text-warning" *ngFor="let i of [1,2,3,4,5]; let idx = index"
                       [class.text-muted]="idx + 1 > hotel.rating"
                       [class.text-warning]="idx + 1 <= hotel.rating"></i>
                  </div>
                  <span class="badge bg-success">
                    {{ hotel.rating | number:'1.1-1' }}/5
                  </span>
                </ng-container>
                
                <!-- Template para cuando no hay reseñas -->
                <ng-template #noReviews>
                  <div class="rating-stars me-2">
                    <i class="far fa-star text-muted" *ngFor="let i of [1,2,3,4,5]"></i>
                  </div>
                  <span class="badge bg-secondary">Sin reseñas</span>
                </ng-template>
              </div>
            </div>
            
            <p class="card-text text-muted">{{ hotel.description | slice:0:100 }}...</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Testimonios -->
<section class="py-5" style="background: var(--primary-light);">
  <div class="container">
    <h2 class="text-center text-white mb-5">Testimonios</h2>
    <div class="row g-4">
      <div class="col-md-6">
        <div class="testimonial-card bg-white p-4 rounded-3 h-100">
          <p class="mb-3">"Una experiencia inolvidable. La personalización del viaje fue exactamente lo que buscábamos."</p>
          <div class="d-flex align-items-center">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=50&h=50&fit=crop&crop=face" 
                 alt="Usuario" class="rounded-circle me-3" width="50" height="50">
            <div>
              <h6 class="mb-1">María González</h6>
              <small class="text-muted">Cliente satisfecha</small>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="testimonial-card bg-white p-4 rounded-3 h-100">
          <p class="mb-3">"El mejor servicio personalizado que he experimentado. Cada detalle fue considerado."</p>
          <div class="d-flex align-items-center">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=50&h=50&fit=crop&crop=face" 
                 alt="Usuario" class="rounded-circle me-3" width="50" height="50">
            <div>
              <h6 class="mb-1">Carlos Rodríguez</h6>
              <small class="text-muted">Viajero frecuente</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Contacto -->
<section class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <h2 class="text-center mb-4 text-secondary">Contáctanos</h2>
        <p class="text-center text-muted mb-5">
          ¿Tienes preguntas? Estamos aquí para ayudarte a planificar tu aventura perfecta.
        </p>
        <form (ngSubmit)="onContactSubmit()" #contactFormRef="ngForm" class="contact-form">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="name" class="form-label">Nombre</label>
              <input 
                type="text" 
                class="form-control" 
                id="name" 
                name="name" 
                [(ngModel)]="contactForm.name"
                required>
            </div>
            <div class="col-md-6">
              <label for="email" class="form-label">Correo electrónico</label>
              <input 
                type="email" 
                class="form-control" 
                id="email" 
                name="email" 
                [(ngModel)]="contactForm.email"
                required>
            </div>
            <div class="col-12">
              <label for="subject" class="form-label">Asunto</label>
              <input 
                type="text" 
                class="form-control" 
                id="subject" 
                name="subject" 
                [(ngModel)]="contactForm.subject"
                required>
            </div>
            <div class="col-12">
              <label for="message" class="form-label">Mensaje</label>
              <textarea 
                class="form-control" 
                id="message" 
                name="message" 
                rows="5" 
                [(ngModel)]="contactForm.message"
                required></textarea>
            </div>
            <div class="col-12 text-center">
              <button 
                type="submit" 
                class="btn btn-primary btn-lg px-5"
                [disabled]="!contactFormRef.form.valid">
                <i class="fas fa-paper-plane me-2"></i>
                Enviar Mensaje
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Loading overlay -->
<div class="loading-overlay" *ngIf="isLoading">
  <div class="text-center">
    <div class="loading-spinner mb-3"></div>
    <p class="text-white">Cargando contenido...</p>
  </div>
</div>
